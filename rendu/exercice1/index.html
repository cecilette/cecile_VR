<html>

    <head>
      <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
      <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.0.1/dist/aframe-extras.min.js"></script>
      <script>
//AFRAME... = je créé des composants (répertoire)
      AFRAME.registerComponent('loaded', {
          init: function () {
            var el = this.el;
      el.addEventListener('model-loaded', () => {
            console.log(">>>> modele chargé "+el.id);
          });
        el.addEventListener('model-error', () => {
            console.log(">>>> modeleerreur");
          });
          }
      });

      AFRAME.registerComponent('finished', {
          init: function () {
              var el = this.el;
                el.addEventListener('animation-finished',() => {
                  console.log(">>>> animation fini "+el.id);
                });
                }
            });

      AFRAME.registerComponent('loop', {
          init: function () {
              var el = this.el;
              var nombre = 1;
                el.addEventListener('animation-loop',() => {
                  if (nombre<5){nombre = nombre +1}
                    else {nombre = 1}
                  console.log(nombre)
switch (nombre) {
  case 1: el.setAttribute ('animation-mixer', "clip: pas_01_D")
  el.setAttribute ('animation-mixer', "timeScale: 0.5")
  console.log("anim 1")
    break;

  case 2: el.setAttribute ('animation-mixer', "clip: pas_02_F")
  el.setAttribute ('animation-mixer', "timeScale: 1.3")
    console.log("anim 2")
    break;

  case 3:
  el.setAttribute ('animation-mixer', "clip: pas_03_D")
  el.setAttribute ('animation-mixer', "timeScale: 1.3")
    console.log("anim 3")
    break;

  case 4:
  el.setAttribute ('animation-mixer', "clip: pas_04_F")
  el.setAttribute ('animation-mixer', "timeScale: 0.5")
    console.log("anim 4")
    break;

  case 5:
  el.setAttribute ('animation-mixer', "clip: pas_05_F")
  el.setAttribute ('animation-mixer', "timeScale: 1.3")
    console.log("anim 5")
    break;

}
                  console.log(">>>> loop fini "+el.id);

                });
                }
            });


      </script>
    </head>



    <body>
<!-- a-scene: lieu ou je vais placer tous les elements de ma scene ()-->
      <a-scene>
<!-- assets = je donne la référence du "lieu" ou se trouve le fichier-->
      <a-assets>
        <a-asset-item id="genia" src="./genia_5.glb"></a-asset-item>
      </a-assets>

<!-- zn jaune = les composants-->
      <a-entity id = " modele3Dgenia"

                position="0 0 -2"
                rotation="90 0 165"
                scale="1 1 1"
                gltf-model="#genia"
                animation-mixer="clip: pas_01_D; repetitions: 15; timeScale: 0.5"
                loaded
                finished
                loop

                >

      </a-entity>

       <a-sky color="#BDEEEE"></a-sky>

      <a-box
            position="0 0.5 -5"
            rotation="0 0 90"
            coucou
            log="texte: ça fonctionne"
            >
      </a-box>

      <a-plane
  position="0 0 -4" rotation="-90 0 0" width="20" height="20" color="#7BC8A4"
  >
    </a-plane>

  </a-scene>

    </body>

    </html>
